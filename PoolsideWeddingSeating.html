<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wedding Seating Plan â€¢ Apple Style</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- Apple System Fonts & Basics --- */
        body {
            background-color: #F5F5F7; /* Apple Light Gray */
            color: #1D1D1F;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", "PingFang SC", "Microsoft YaHei", sans-serif;
            margin: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100vh;
            -webkit-font-smoothing: antialiased;
        }

        /* --- é¡¶éƒ¨æ§åˆ¶æ  (Glassmorphism) --- */
        .controls {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0,0,0,0.05);
            padding: 16px 30px;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.02);
        }

        .control-group {
            display: flex; flex-direction: column; align-items: center; gap: 8px;
        }

        .control-label {
            font-size: 12px; font-weight: 600; color: #86868B; letter-spacing: 0.5px; text-transform: uppercase;
        }

        /* iOS Segmented Control Style Buttons */
        .btn-group {
            background: #E5E5EA; /* iOS Gray 5 */
            padding: 4px;
            border-radius: 12px;
            display: flex;
            gap: 2px;
        }

        .btn-tab {
            padding: 8px 20px;
            border-radius: 9px;
            border: none;
            background: transparent;
            font-size: 15px;
            font-weight: 500;
            color: #1D1D1F;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 1, 0.5, 1);
        }

        .btn-tab:hover:not(.active) {
            color: #000;
        }

        .btn-tab.active {
            background: #FFFFFF;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12), 0 0 1px rgba(0,0,0,0.1);
            font-weight: 600;
        }

        /* --- ç”»å¸ƒåŒºåŸŸ --- */
        .canvas-wrapper {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: #F5F5F7;
            cursor: grab;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .canvas-wrapper:active { cursor: grabbing; }

        /* å¸ƒå±€å®¹å™¨ */
        .layout-container {
            width: 1600px;
            height: 1400px;
            background-color: #FFFFFF;
            border-radius: 60px;
            /* Apple style soft shadow */
            box-shadow: 0 20px 60px rgba(0,0,0,0.08); 
            position: relative;
            transform-origin: center center;
            transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1);
        }

        /* å³ä¾§è£…é¥°çº¿ - æç®€ */
        .right-accent {
            position: absolute; right: 0; top: 0; bottom: 0; width: 6px;
            background: #BFDBFE; /* Soft Blue */
            border-top-right-radius: 60px; border-bottom-right-radius: 60px;
        }

        /* --- èˆå°åŒºåŸŸ --- */
        .stage-area {
            position: absolute; top: 40px; left: 50%; transform: translateX(-50%);
            width: 700px; height: 90px;
            background: linear-gradient(135deg, #FF3B30, #FF2D55); /* Apple Red/Pink */
            border-radius: 24px;
            display: flex; justify-content: center; align-items: center;
            color: white; font-size: 32px; font-weight: 700; letter-spacing: 4px;
            box-shadow: 0 10px 30px rgba(255, 45, 85, 0.3);
            z-index: 10;
        }

        /* Tå° */
        .runway {
            position: absolute; top: 120px; left: 50%; transform: translateX(-50%);
            width: 140px; height: 750px;
            background: linear-gradient(180deg, #5AC8FA 0%, #007AFF 100%); /* Apple Blue */
            border-bottom-left-radius: 16px; border-bottom-right-radius: 16px;
            opacity: 0.15; /* æ›´åŠ é€šé€ */
            z-index: 1;
            pointer-events: none;
        }
        .runway-label {
            position: absolute; top: 400px; left: 50%; transform: translateX(-50%);
            color: #007AFF; font-weight: 700; font-size: 24px; letter-spacing: 2px;
            opacity: 0.5; z-index: 1; pointer-events: none; white-space: nowrap;
        }

        /* --- æ¡Œå­ç»„ä»¶ --- */
        .table-group {
            position: absolute;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            width: 120px; height: 120px; /* å¢å¤§è§¦æ§/å¸ƒå±€åŸºå‡† */
            z-index: 20;
            transition: all 0.3s ease;
        }

        /* æ¡Œå­åœ†åœˆ - æç®€æ‹Ÿç‰© */
        .table-circle {
            width: 100px; height: 100px;
            border-radius: 50%;
            background: white;
            /* å†…éƒ¨æ–‡å­— */
            display: flex; justify-content: center; align-items: center;
            font-size: 32px; font-weight: 700; color: #1D1D1F;
            /* é˜´å½±ä¸è¾¹æ¡† */
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
            border: 4px solid; /* é¢œè‰²ç”±JSåŠ¨æ€è®¾å®š */
            cursor: pointer;
            z-index: 5;
            transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .table-circle:hover { transform: scale(1.1); box-shadow: 0 12px 32px rgba(0,0,0,0.18); }

        /* æ¨¡å¼1ï¼šæ¦‚è§ˆæ ‡ç­¾ (Pill style) */
        .label-pill {
            margin-top: 16px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 10px 24px;
            border-radius: 99px;
            font-size: 20px; font-weight: 600; color: #1D1D1F;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            white-space: nowrap;
            z-index: 10;
            border: 1px solid rgba(0,0,0,0.05);
            max-width: 280px; overflow: hidden; text-overflow: ellipsis;
        }

        /* æ¨¡å¼2ï¼šå«æ˜Ÿåå• (Satellite) */
        .satellite-name {
            position: absolute;
            font-size: 16px; /* å­—å·åŠ å¤§ */
            font-weight: 600;
            color: #1D1D1F;
            background: rgba(255,255,255, 0.85);
            backdrop-filter: blur(4px);
            padding: 6px 14px;
            border-radius: 12px;
            white-space: nowrap;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            pointer-events: none;
            z-index: 2;
            transform-origin: center center;
            border: 1px solid rgba(0,0,0,0.02);
        }

        /* è£…é¥°å…ƒç´  */
        .pillar {
            position: absolute; width: 40px; height: 40px;
            background: #F2F2F7; border: 2px solid #E5E5EA;
            border-radius: 12px;
        }

        .entrance {
            position: absolute; bottom: 80px; right: -40px;
            background: #007AFF; color: white;
            padding: 16px 40px; border-radius: 20px;
            font-size: 24px; font-weight: 700;
            box-shadow: 0 8px 20px rgba(0,122,255,0.3);
        }

        /* å¼¹çª— */
        #modal-overlay {
            display: none; position: fixed; inset: 0;
            background: rgba(0,0,0,0.3); backdrop-filter: blur(8px);
            z-index: 1000; opacity: 0; transition: opacity 0.3s;
            justify-content: center; align-items: center;
        }
        #modal-overlay.active { display: flex; opacity: 1; }
        
        .modal-card {
            background: white; width: 480px; border-radius: 32px;
            padding: 40px;
            box-shadow: 0 40px 80px rgba(0,0,0,0.2);
            transform: scale(0.9); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        #modal-overlay.active .modal-card { transform: scale(1); }

    </style>
</head>
<body>

    <!-- é¡¶éƒ¨æ§åˆ¶é¢æ¿ -->
    <div class="controls">
        <div class="control-group">
            <span class="control-label">SCENARIO / æƒ…æ™¯</span>
            <div class="btn-group">
                <button class="btn-tab active" onclick="setScenario('A')">ğŸ‰ äº’åŠ¨ä¼˜å…ˆ</button>
                <button class="btn-tab" onclick="setScenario('B')">ğŸµ é•¿è¾ˆä¼˜å…ˆ</button>
            </div>
        </div>

        <div class="control-group">
            <span class="control-label">VARIATION / æ–¹æ¡ˆ</span>
            <div class="btn-group">
                <button class="btn-tab active" onclick="setVariation(1)">æ–¹æ¡ˆ 1</button>
                <button class="btn-tab" onclick="setVariation(2)">æ–¹æ¡ˆ 2</button>
                <button class="btn-tab" onclick="setVariation(3)">æ–¹æ¡ˆ 3</button>
            </div>
        </div>

        <div class="control-group">
            <span class="control-label">VIEW / è§†å›¾</span>
            <div class="btn-group">
                <button class="btn-tab active" onclick="setView('overview')">ğŸ“ æ¦‚è§ˆæ ‡ç­¾</button>
                <button class="btn-tab" onclick="setView('names')">ğŸ‘¥ è¯¦ç»†åå•</button>
            </div>
        </div>
    </div>

    <!-- ç”»å¸ƒ -->
    <div class="canvas-wrapper">
        <div class="layout-container" id="layout">
            <div class="right-accent"></div>

            <div class="stage-area">å©šç¤¼ä¸»èˆå° STAGE</div>
            <div class="runway"></div>
            <div class="runway-label">T-Walkway / äº’åŠ¨åŒº</div>

            <!-- åŠ¨æ€ç”Ÿæˆçš„æ¡Œå­å±‚ -->
            <div id="tables-layer"></div>

            <!-- è£…é¥°æŸ± (ä½ç½®è°ƒæ•´ä»¥é¿å¼€æ¡Œå­) -->
            <div class="pillar" style="top: 300px; left: 16%"></div>
            <div class="pillar" style="top: 600px; left: 16%"></div>
            <div class="pillar" style="top: 900px; left: 16%"></div>
            
            <div class="pillar" style="top: 300px; right: 16%"></div>
            <div class="pillar" style="top: 600px; right: 16%"></div>
            <div class="pillar" style="top: 900px; right: 16%"></div>

            <div class="entrance">Entrance å…¥å£ â†’</div>
        </div>
    </div>

    <!-- å¼¹çª— -->
    <div id="modal-overlay" onclick="closeModal()">
        <div class="modal-card" onclick="event.stopPropagation()">
            <div style="display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:20px;">
                <div>
                    <h2 style="font-size:36px; font-weight:800; color:#1D1D1F; margin:0;" id="m-title">Table 1</h2>
                    <p style="font-size:18px; color:#86868B; margin:4px 0 0 0;" id="m-subtitle">Group Name</p>
                </div>
                <button onclick="closeModal()" style="background:#F2F2F7; border:none; width:40px; height:40px; border-radius:50%; font-size:20px; color:#86868B; cursor:pointer;">Ã—</button>
            </div>
            
            <div id="m-content" style="display:flex; flex-wrap:wrap; gap:10px;">
                <!-- Names injected here -->
            </div>
        </div>
    </div>

    <script>
        // --- 1. æ•°æ®å®šä¹‰ (Apple Colors) ---
        const colors = {
            groom: "#007AFF",   // System Blue
            bride: "#FF2D55",   // System Pink
            family: "#AF52DE",  // System Purple
            elder: "#34C759",   // System Green
            main: "#FF3B30"     // System Red
        };

        const guestsDB = {
            // ä¸»æ¡Œ (å®¹é‡å¤§)
            main_groom: { label: "ç”·æ–¹ä¸»æ¡Œ", color: colors.main, list: ["æ–°éƒ", "æ–°å¨˜", "æ–°éƒçˆ¸", "æ–°éƒå¦ˆ", "èˆ…èˆ…", "å¤–å©†", "å”å”", "å©¶å©¶"] },
            main_bride: { label: "å¥³æ–¹ä¸»æ¡Œ", color: colors.main, list: ["è™¾ä»”èˆ…", "å¨£èˆ…", "å²³çˆ¶", "å²³æ¯", "å§å§x2", "å“¥å“¥x2", "é™ˆæ¹˜æ€¡"] },

            // æœ‹å‹
            g_hs_1: { label: "é«˜ä¸­åŒå­¦ A", color: colors.groom, list: ["å»–æ—º", "è–›è¹", "éƒ­ç", "å†¯çª", "ç½—å‡¯å‡¯", "ç‹æ€é›¨", "é‚±æ‹“å…ˆ", "æ±ªæ€è´"] },
            g_hs_2: { label: "é«˜ä¸­åŒå­¦ B", color: colors.groom, list: ["é»„åŸ¹å¼º", "å¼ºå«‚", "éƒ­å®‡ç¿”", "ç‹ä¹‹éŸµ", "æ¢åˆšè€€", "å¾è®¸æ¨", "åå»º"] },
            g_uni: { label: "å¤§å­¦/å°å­¦", color: colors.groom, list: ["é™ˆä½³èƒœ", "é¾šç¥", "æœ±æ™´å®‡", "ä¿Šå‡¯å¤«å¦‡", "è°¢æ³½ä¼Ÿ", "å¥¥ç‘", "éƒ‘å»ºå®", "å”æµ©å¤©"] },
            
            // äº²æˆš
            g_fam_dad: { label: "ç”·æ–¹çˆ¶ç³»äº²æˆš", color: colors.family, list: ["æ•ä¸½å§ä¸€å®¶", "ä½³èå§‘å§‘å®¶", "é»„å£«æ°"] },
            g_fam_mom1: { label: "ç”·æ–¹æ¯ç³»äº²æˆš A", color: colors.family, list: ["ä¸‰å§¨ä¸€å®¶", "èˆ…èˆ…ä¸€å®¶"] },
            g_fam_mom2: { label: "ç”·æ–¹æ¯ç³»äº²æˆš B", color: colors.family, list: ["å¤§å§¨ä¸€å®¶", "å°å°šå“¥ä¸€å®¶"] },
            
            // é•¿è¾ˆæœ‹å‹ (å…³é”®ä¼˜åŒ–ç‚¹ï¼šåˆå¹¶äº†éƒ¨åˆ†äººæ•°)
            g_dad_fri_all: { label: "çˆ¶äº²æœ‹å‹ (å¤§æ¡Œ)", color: colors.elder, list: ["å°‘é¾™", "æ™¯äº‘", "ä¿Šç§‘", "ç¦å…´", "å†›å²š", "è¿œæ˜", "æŒ¯å¿ ", "æ¸Šæ´²", "è¿ä¼Ÿ"] }, 
            // ^ åˆå¹¶äº† A å’Œ B ç»„ï¼Œçº¦ 14-15äººï¼Œå®‰æ’åœ¨å®½æ•ä½ç½®æˆ–æ‹†åˆ†
            
            g_mom_fri: { label: "æ¯äº²æœ‹å‹", color: colors.elder, list: ["å´äº‘", "è‹¹æœ", "ç«¯å¦®", "çº¢éœ", "ç‡•ç‡•", "è¢æ€çµ"] },
            
            // å¥³æ–¹
            b_coll: { label: "ä¸€å¶åŒäº‹", color: colors.bride, list: ["ç¬æ²¿", "ä¿Šä¼Ÿ", "è¿œè¾‰", "æ”€å“¥", "æ¥ å“¥", "å°ç°", "å©·å§"] },
            b_fri_1: { label: "æ–°å¨˜æœ‹å‹ A", color: colors.bride, list: ["èƒ–å¦", "ç²ç²", "è´¾è±", "æˆ´å¾·å¨"] },
            b_fri_2: { label: "æ–°å¨˜æœ‹å‹ B", color: colors.bride, list: ["èµ–å‡¤éœ", "å¾å¾", "å¤§æ›¾", "æ¡æ¡", "å´”ç‰", "é™ˆæ·"] },
            b_fam: { label: "å¥³æ–¹äº²æˆš", color: colors.family, list: ["è™¾ä»”èˆ…å®¶", "å¨£èˆ…å®¶", "å§‘å¦ˆå®¶"] }
        };

        // --- 2. åæ ‡ç³»ç»Ÿ (1600x1400, ç§»é™¤ T-16) ---
        // å‚ç›´é—´è·æ‹‰å¤§åˆ° 220px (åŸ 140px)
        const coords = {
            "main-L": { top: 200, left: "37%" },
            "main-R": { top: 200, right: "37%" },
            
            // å·¦åˆ— (å†…)
            "t-9":  { top: 450, left: "37%" },
            "t-11": { top: 700, left: "37%" },
            "t-13": { top: 950, left: "37%" },
            "t-15": { top: 1200, left: "37%" },

            // å³åˆ— (å†…)
            "t-1":  { top: 450, right: "37%" },
            "t-3":  { top: 700, right: "37%" },
            "t-6":  { top: 950, right: "37%" },
            "t-8":  { top: 1200, right: "37%" },

            // å·¦å¤–åˆ— (åªä¿ç•™ä¸¤ä¸ªä¼˜è¶Šä½ç½®ï¼Œç§»é™¤ 16)
            "t-10": { top: 500, left: "15%" },
            "t-12": { top: 850, left: "15%" }, 
            // T-16 REMOVED

            // å³å¤–åˆ—
            "t-2":  { top: 500, right: "15%" },
            "t-5":  { top: 850, right: "15%" }
        };

        // --- 3. æ–¹æ¡ˆé€»è¾‘ (æ—  16 å·æ¡Œç‰ˆ) ---
        const scenarios = {
            A: { // äº’åŠ¨ä¼˜å…ˆ
                1: {
                    "main-L":"main_groom", "main-R":"main_bride",
                    "t-9":"g_hs_1", "t-11":"g_hs_2", // ç”·æ–¹æœ‹å‹å‰ç½®
                    "t-1":"b_fri_1", "t-3":"b_fri_2", // å¥³æ–¹æœ‹å‹å‰ç½®
                    "t-13":"g_uni", "t-15":"b_coll", 
                    "t-10":"g_fam_dad", "t-12":"g_fam_mom1", // äº²æˆšæ”¾å·¦å¤–ä¾§
                    "t-2":"g_dad_fri_all", "t-5":"g_mom_fri", // çˆ¶æ¯æœ‹å‹æ”¾å³å¤–ä¾§ (å¤§æ¡Œ)
                    "t-6":"g_fam_mom2", "t-8":"b_fam"
                },
                2: {
                    "main-L":"main_groom", "main-R":"main_bride",
                    "t-9":"g_hs_1", "t-11":"b_coll", // æ··åˆå‰æ’
                    "t-1":"b_fri_1", "t-3":"g_uni",
                    "t-13":"g_hs_2", "t-15":"b_fri_2",
                    "t-10":"g_fam_dad", "t-12":"g_fam_mom1",
                    "t-2":"g_mom_fri", "t-5":"b_fam",
                    "t-6":"g_dad_fri_all", "t-8":"g_fam_mom2"
                },
                3: { // æè‡´å¹´è½»åŒ…å›´
                    "main-L":"main_groom", "main-R":"main_bride",
                    "t-9":"g_hs_1", "t-11":"g_hs_2",
                    "t-13":"g_uni", "t-15":"b_coll",
                    "t-1":"b_fri_1", "t-3":"b_fri_2",
                    "t-10":"g_fam_mom1", "t-12":"g_fam_mom2",
                    "t-2":"g_dad_fri_all", "t-5":"g_mom_fri",
                    "t-6":"b_fam", "t-8":"g_fam_dad"
                }
            },
            B: { // é•¿è¾ˆä¼˜å…ˆ
                1: {
                    "main-L":"main_groom", "main-R":"main_bride",
                    "t-9":"g_fam_dad", "t-11":"g_fam_mom1", // äº²æˆšæœ€å‰
                    "t-1":"b_fam", "t-3":"g_fam_mom2",
                    "t-10":"g_dad_fri_all", "t-12":"g_mom_fri", // çˆ¶æ¯æœ‹å‹å¤–ä¾§Cä½
                    "t-13":"g_hs_1", "t-15":"g_hs_2", // æœ‹å‹å¾€å
                    "t-6":"b_fri_1", "t-8":"b_fri_2",
                    "t-2":"b_coll", "t-5":"g_uni"
                },
                2: {
                    "main-L":"main_groom", "main-R":"main_bride",
                    "t-9":"g_dad_fri_all", "t-11":"g_mom_fri", // æœ‹å‹æœ€å°Šè´µ
                    "t-1":"b_fam", "t-3":"g_fam_dad",
                    "t-13":"g_fam_mom1", "t-15":"g_fam_mom2",
                    "t-10":"g_hs_1", "t-12":"g_uni",
                    "t-2":"b_fri_1", "t-5":"b_fri_2",
                    "t-6":"g_hs_2", "t-8":"b_coll"
                },
                3: {
                    "main-L":"main_groom", "main-R":"main_bride",
                    "t-9":"g_fam_mom1", "t-11":"g_fam_mom2",
                    "t-1":"g_dad_fri_all", "t-3":"g_mom_fri",
                    "t-10":"g_fam_dad", "t-12":"b_fam",
                    "t-13":"g_hs_1", "t-15":"g_hs_2",
                    "t-2":"b_fri_1", "t-5":"b_fri_2",
                    "t-6":"g_uni", "t-8":"b_coll"
                }
            }
        };

        // --- 4. æ¸²æŸ“å¼•æ“ ---
        let state = { scen: 'A', vari: 1, view: 'overview' };

        function render() {
            const container = document.getElementById('tables-layer');
            container.innerHTML = '';
            
            const layout = scenarios[state.scen][state.vari];

            Object.keys(layout).forEach(tid => {
                const groupKey = layout[tid];
                const group = guestsDB[groupKey];
                const pos = coords[tid];
                if(!pos || !group) return;

                // å®¹å™¨
                const div = document.createElement('div');
                div.className = 'table-group';
                div.style.top = pos.top + 'px';
                if(pos.left) div.style.left = pos.left;
                if(pos.right) div.style.right = pos.right;

                // åœ†æ¡Œ
                const circle = document.createElement('div');
                circle.className = 'table-circle';
                circle.style.borderColor = group.color;
                circle.style.color = group.color; // æ–‡å­—é¢œè‰²åŒè¾¹æ¡†
                circle.innerText = tid.replace('t-', '').replace('main-', 'ä¸»');
                circle.onclick = (e) => { e.stopPropagation(); openModal(circle.innerText, group); };
                
                div.appendChild(circle);

                // è§†å›¾æ¨¡å¼
                if (state.view === 'overview') {
                    const pill = document.createElement('div');
                    pill.className = 'label-pill';
                    pill.innerText = group.label;
                    div.appendChild(pill);
                } else {
                    renderSatellites(div, group.list);
                }

                container.appendChild(div);
            });
        }

        // å«æ˜Ÿåå•æ¸²æŸ“ (Apple Style)
        function renderSatellites(parent, list) {
            const radius = 115; // åŠå¾„åŠ å¤§ï¼Œé˜²é‡å 
            const cleanList = list.slice(0, 12); // é™åˆ¶æ˜¾ç¤ºæ•°é‡é˜²æ­¢çˆ†ç‚¸
            const step = 360 / cleanList.length;

            cleanList.forEach((name, i) => {
                const angle = (step * i) - 90;
                const rad = angle * (Math.PI / 180);
                const x = Math.cos(rad) * radius;
                const y = Math.sin(rad) * radius;

                const tag = document.createElement('div');
                tag.className = 'satellite-name';
                tag.innerText = name.split('x')[0]; // å»æ‰x2
                tag.style.transform = `translate(${x}px, ${y}px)`;
                
                parent.appendChild(tag);
            });
        }

        // --- äº¤äº’ ---
        function setScenario(v) { state.scen = v; updateControls(); render(); }
        function setVariation(v) { state.vari = v; updateControls(); render(); }
        function setView(v) { state.view = v; updateControls(); render(); }

        function updateControls() {
            document.querySelectorAll('.btn-tab').forEach(b => {
                b.classList.remove('active');
                const call = b.getAttribute('onclick');
                if(call.includes(`'${state.scen}'`) || call.includes(`(${state.vari})`) || call.includes(`'${state.view}'`)) {
                    b.classList.add('active');
                }
            });
        }

        // ç¼©æ”¾é€‚é…
        function handleResize() {
            const box = document.getElementById('layout');
            const wrap = document.querySelector('.canvas-wrapper');
            const scale = Math.min(
                (wrap.clientWidth - 40) / 1600,
                (wrap.clientHeight - 40) / 1400
            );
            const s = Math.max(scale, 0.25);
            box.style.transform = `scale(${s})`;
        }
        window.onresize = handleResize;

        // Modal
        function openModal(num, group) {
            document.getElementById('m-title').innerText = num.includes('ä¸»') ? num + 'æ¡Œ' : `No. ${num}`;
            document.getElementById('m-subtitle').innerText = group.label;
            document.getElementById('m-subtitle').style.color = group.color;
            
            const content = document.getElementById('m-content');
            content.innerHTML = '';
            group.list.forEach(n => {
                const chip = document.createElement('span');
                chip.style.cssText = `background:${group.color}20; color:${group.color}; padding:8px 16px; border-radius:8px; font-weight:600; font-size:16px;`;
                chip.innerText = n;
                content.appendChild(chip);
            });
            
            document.getElementById('modal-overlay').classList.add('active');
        }
        function closeModal() {
            document.getElementById('modal-overlay').classList.remove('active');
        }

        // Start
        render();
        handleResize();

    </script>
</body>
</html>